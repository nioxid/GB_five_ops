Привет, мы команда FiveOps.
Состав команды:
 
 Владимир -инженер, выполнял работы по настройке развертывания ПО через ansible
 Игорь - инженер, выполнял работы по настройке развертывания ПО через ansible + отвечал на инфраструктуру
 Александр - тимлид, отвечал за организацию встреч команды, планирование и распределение работ в команде. 

Инфраструктура: 
 - Серверы приложений - 2 шт.
   Описание: 
      Установка ПО (wordpress + nginx + nfs share ) выполняется ansible.
      Организацию отказоустойчивости было решено достичь с использованием RRDNS
      и монтированием хранилища данных файлов wordpress. Всё в рамках ТЗ)
      
             
 - Сервер БД - 1шт.
   Описание: 
      Установка СУБД mysql и настройка резервного копирования выполняется ansible. 
      Также подключается nfs share для хранения резервных копий БД. 
      Резервное копирование(выполняется средствами mysql) настроено по расписанию (cron) и на глубину 3 дня в рамках ТЗ.
 
 - Сервер мониторинга и хранилища данных 1 шт.
   Описание:
      Установка ПО мониторинга (Prometheus, Grafana,node_exporter и telegraf.) выполняется ansible.
      Также при помощи ansible на сервере реализован алертинг средствами Grafana и настроено хранилище
      данных wordpress и резервных копий БД

 CI/CD реализовано средствами GitHub Action. Пайплайн workflow храниться в репозитории проекта.

Для реализации проекта был составлен план работ, так же задачи были распределены в рамках КТ.

План работ:
1. Создание репозитория на GitHub и настройка. (Саша) - Готово
2. Создание серверов для проекта. (Игорь) - Готово
3. Настроить RRDNS.(Саша) - Готово
4. Домен и SSL сертификаты (Саша) - Готово
5. Автоматизировать перенос ssl-сертификатов из репозитория на app1-2 в /etc/ssl/ -(Игорь)- Готово
6. Добавить роль ansible для деплоя на monitoring-srv (Саша) - Готово - не пригодилась в итоге.
7. Настройка Github Action Runner (Саша) - Готово
8. nfs-server для сайта (Игорь) - Готово
7. Организация мониторинга
   Агенты мониторинга - node_exporter и telegraf. (Вова)
     Список обязательных метрик проекта:
           По каждому серверу: (Игорь)
                 - успешность резервного копирования  -ок
           Серверы приложений: (Вова)
                 - количество соединений на nginx  -ок
                 - наличие и количество кодов ответа 5xx -ок
           Серверы баз данных: (Вова)
                 - состояние кластера (все ли ноды онлайн) -ок
                 - количество обращений в бд -ок
                 - наличие длинных запросов (выполняющихся более 5с) - ок

           Общие по проекту: (Вова+Игорь)
                 - доступность “главной страницы” -ок
                 - время ответа “главной” - ок
                 - наличие кодов ответа, отличных от 200. - ок
                 - срок делегирования домена 
                 - срок действия ssl сертификата -ок

КТ-1:
1. Инвентарь проекта, роли, выполняющие базовую настройку серверов:

   - установка пакетов "для работы в консоли" (mc, htop, iotop, …). (Вова) - Готово
   - управление правами доступа к серверам: добавление/удаление ssh-ключей в root. (Игорь) - Готово
   - роль управления пакетными фильтрами: добавление/удаление правил iptables. - Готово.

2. Установка WP (в ручном режиме). (Вова) - Готово

КТ-2:
1. CI:

  - по пушу кода в репозиторий приходит уведомление в телеграм-чат группы (Саша) - Готово
  - по приему мердж-реквеста в мастер-ветку проекта изменения выкатываются
    на сервера проекта + приходит уведомление в телеграм-канал (Саша). - Готово
  - существует и опробована возможность отката изменений. (Саша) - Готово

2. Приложение:

  - на серверах приложений установлены и настроены необходимые
    пакеры (php-fpm и т.д., по требованиям CMS). (Вова) - Готово
  - на серверах приложений развернута базовая инсталляция WordPress. (Вова) - Готово
  - настроена двусторонняя синхронизация файлов между серверами
    приложений. - nfs (Игорь) - Готово
  
КТ-3:
1. Мониторинг и резервное копирование:
  
    - проект обвязан мониторингом на стеке Прометей+Графана ( Вова) - Готово
    - алерты приходят в телеграм-канал проекта. (Саша) - Готово.
    - резервное копирование файлов и бд выполняется по
      управляемому расписанию на заданную глубину. (Игорь) - Готово.
    - резервное копирование обвязано мониторингом. (Игорь) - Готово  

КТ-4:
Состав:
1. Приемо-сдаточные испытания:
   - весь Ансибл-код из ветки master выполняется на инвентаре
     проекта без ошибок и изменений, согласно описаным в readme.md инструкциям. - Готово
     
   - при отключении одного из серверов приложений можно зайти в админку CMS - (Саша) - Готово
   
   - выборочная проверка алертинга (достижение порогового значения
     метрики должно вызывать срабатывание алерта) (Вова) - Готово
   
   - проверка возможности восстановить данные из резервной копии (Игорь) - Готово
   
   - проверка работоспособности синхронизации контента между
     серверами приложения - (Игорь)(nfs) - Готово
   
   - задание "со звездочкой" - оценка производительности:
     нагрузочное тестирование "главной", с целью выявления
     максимальной нагрузки, которую держит решение 

Сложности в реализации проекта возникали при настройке firewall, настройки GitHub Action Runner'a, написания шаблонов для мониторинга
